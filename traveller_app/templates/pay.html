<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Payment</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css" />
  </head>
  <style>
    .card {
      box-shadow: 0 20px 27px 0 rgb(0 0 0 / 5%);
    }
    .card {
      position: relative;
      display: flex;
      flex-direction: column;
      min-width: 0;
      word-wrap: break-word;
      background-color: #fff;
      background-clip: border-box;
      border: 0 solid rgba(0, 0, 0, 0.125);
      border-radius: 1rem;
    }
  </style>
  <body>
    <!-- navbar -->
    <nav class="navbar navbar-expand-lg bg-body-tertiary navbar fixed-top">
      <div class="container-fluid">
        <a class="navbar-brand" href="#"><i class="bi bi-luggage"></i> Traveller</a>
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button>
        <div class="collapse navbar-collapse justify-content-end" id="navbarNav">
          <ul class="nav nav-underline">
            <li class="nav-item">
              <a class="nav-link" aria-current="page" href="/">Home</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="/trip">Trip</a>
            </li>
            <li class="nav-item">
              {% if request.user.is_authenticated %}
                <a class="nav-link" href="/lgout">Logout</a>
              {% else %}
                <a class="nav-link" href="/log">Login</a>
              {% endif %}
            </li>
            <li class="nav-item">
              <a class="nav-link" href="/pro"><i class="bi bi-person-fill"></i></a>
            </li>
          </ul>
        </div>
      </div>
    </nav>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.13.1/css/all.min.css" integrity="sha256-2XFplPlrFClt0bIdPgpz8H7ojnk10H69xRqd9+uTShA=" crossorigin="anonymous" />

    <div class="container" style="margin-top: 10%;">
      <div class="row">
        <div class="col-lg-12">
          <div class="card">
            <div class="card-body">
              <div class="invoice-title">
                <div class="mb-4">
                  <h2 class="mb-1 text-muted"><i class="bi bi-luggage"></i> Traveller</h2>
                </div>
                <div class="text-muted">
                  <p class="mb-1">New York, NY 10012, US</p>
                  <p class="mb-1">
                    <i class="uil uil-envelope-alt me-1"></i> info@example.com
                  </p>
                  <p>
                    <i class="uil uil-phone me-1"></i> + 01 234 567 88
                  </p>
                </div>
              </div>

              <hr class="my-4" />

              <div class="row">
                <div class="col-sm-6">
                  <div class="text-muted">
                    <h5 class="font-size-16 mb-3">Billed To:</h5>
                    <h5 class="font-size-15 mb-2">{{ trp.First_name }} {{ trp.Last_name }}</h5>
                    <p class="mb-1">{{ trp.Address }}, {{ trp.State }}, {{ trp.Zip_code }}</p>
                    <p class="mb-1">{{ trp.Email }}</p>
                    <p>{{ trp.Phone_number }}</p>
                  </div>
                </div>
                <!-- end col -->
                <div class="col-sm-6">
                  <div class="text-muted text-sm-end">
                    <div>
                      <h5 class="font-size-15 mb-1">Holiday Place:</h5>
                      <p>{{ trp.Holiday_place }}</p>
                    </div>
                    <div class="mt-4">
                      <h5 class="font-size-15 mb-1">Hotel:</h5>
                      <p>{{ hr }}</p>
                    </div>
                    <div class="mt-4">
                      <h5 class="font-size-15 mb-1">Booking Date & Time:</h5>
                      <p>{{ ftd }}</p>
                    </div>
                  </div>
                </div>
                <!-- end col -->
              </div>
              <!-- end row -->

              <div class="py-2">
                <h5 class="font-size-15">Trip Summary</h5>

                <div class="table-responsive">
                  <table class="table align-middle table-nowrap table-centered mb-0">
                    <thead>
                      <tr>
                        <th style="width: 70px;">No.</th>
                        <th>Item</th>
                        <th>Details</th>
                        <th></th>
                        <th class="text-end" style="width: 120px;">Total</th>
                      </tr>
                    </thead>
                    <!-- end thead -->
                    <tbody>
                      <tr>
                        <th scope="row">01</th>
                        <td>
                          <div>
                            <h5 class="text-truncate font-size-14 mb-1">Check-In</h5>
                          </div>
                        </td>
                        <td>{{ trp.Check_in }}</td>
                        <td></td>
                        <td class="text-end"></td>
                      </tr>
                      <tr>
                        <th scope="row">02</th>
                        <td>
                          <div>
                            <h5 class="text-truncate font-size-14 mb-1">Check-Out</h5>
                          </div>
                        </td>
                        <td>{{ trp.Check_out }}</td>
                        <td></td>
                        <td class="text-end"></td>
                      </tr>
                      <tr>
                        <th scope="row">03</th>
                        <td>
                          <div>
                            <h5 class="text-truncate font-size-14 mb-1">Hotel Star</h5>
                          </div>
                        </td>
                        <td>{{ trp.Star }}</td>
                        <td></td>
                        <td class="text-end"></td>
                      </tr>
                      <tr>
                        <th scope="row">04</th>
                        <td>
                          <div>
                            <h5 class="text-truncate font-size-14 mb-1">Total Guest</h5>
                          </div>
                        </td>
                        <td>{{ tg }}</td>
                        <td></td>
                        <td class="text-end"></td>
                      </tr>
                      <tr>
                        <th scope="row">05</th>
                        <td>
                          <div>
                            <h5 class="text-truncate font-size-14 mb-1">Total Days</h5>
                          </div>
                        </td>
                        <td>{{ td }}</td>
                        <td></td>
                        <td class="text-end">₹{{ od }}</td>
                      </tr>
                      <tr>
                        <th scope="row">06</th>
                        <td>
                          <div>
                            <h5 class="text-truncate font-size-14 mb-1">Including Meal</h5>
                          </div>
                        </td>
                        <td>{{ trp.Meal }}</td>
                        <td></td>
                        <td class="text-end">₹{{ odm }}</td>
                      </tr>
                      <tr>
                        <th scope="row">07</th>
                        <td>
                          <div>
                            <h5 class="text-truncate font-size-14 mb-1">{{ trp.Mount }}</h5>
                          </div>
                        </td>
                        <td>{{ trp.Mount_number }}</td>
                        <td></td>
                        <td class="text-end">₹{{ mt }}</td>
                      </tr>
                      <tr>
                        <th scope="row">08</th>
                        <td>
                          <div>
                            <h5 class="text-truncate font-size-14 mb-1">{{ trp.Bungy }}</h5>
                          </div>
                        </td>
                        <td>{{ trp.Bungy_number }}</td>
                        <td></td>
                        <td class="text-end">₹{{ bj }}</td>
                      </tr>
                      <tr>
                        <th scope="row">09</th>
                        <td>
                          <div>
                            <h5 class="text-truncate font-size-14 mb-1">{{ trp.River }}</h5>
                          </div>
                        </td>
                        <td>{{ trp.River_number }}</td>
                        <td></td>
                        <td class="text-end">₹{{ rr }}</td>
                      </tr>
                      <tr>
                        <th scope="row">10</th>
                        <td>
                          <div>
                            <h5 class="text-truncate font-size-14 mb-1">Cab per km ₹9</h5>
                          </div>
                        </td>
                        <td>This not include in bill pay after that</td>
                        <td></td>
                        <td class="text-end"></td>
                      </tr>
                      <!-- end tr -->
                      <tr>
                        <th scope="row" colspan="4" class="text-end">Sub Total</th>
                        <td class="text-end">₹{{ sub }}</td>
                      </tr>
                      <!-- end tr -->
                      <tr>
                        <th scope="row" colspan="4" class="border-0 text-end">Discount :</th>
                        <td class="border-0 text-end">12%</td>
                      </tr>
                      <!-- end tr -->
                      <tr>
                        <th scope="row" colspan="4" class="border-0 text-end">Tax</th>
                        <td class="border-0 text-end">18%</td>
                      </tr>
                      <!-- end tr -->
                      <tr>
                        <th scope="row" colspan="4" class="border-0 text-end">Total</th>
                        <td class="border-0 text-end">
                          <h4 class="m-0 fw-semibold">₹{{ amount }}</h4>
                        </td>
                      </tr>
                      <!-- end tr -->
                    </tbody>
                    <!-- end tbody -->
                  </table>
                  <!-- end table -->
                </div>
                <!-- end table responsive -->
                <div class="d-print-none mt-4">
                  <div class="float-end">
                    <a href="javascript:window.print()" class="btn btn-success me-1"><i class="fa fa-print"></i></a>
                    <button id="rzp-button1" class="btn btn-primary w-md">Pay</button>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
        <!-- end col -->
      </div>
      <script src="https://checkout.razorpay.com/v1/checkout.js"></script>
      <script>
        var options = {
          key: '{{api_key}}', // Enter the Key ID generated from the Dashboard
          currency: 'INR',
          name: 'Traveller',
          description: 'Test Transaction',
          image: 'https://example.com/your_logo',
          order_id: '{{order_id}}', //This is a sample Order ID. Pass the `id` obtained in the response of Step 1
          handler: function (response) {
            alert(response.razorpay_payment_id)
            alert(response.razorpay_order_id)
            alert(response.razorpay_signature)
          },
          prefill: {
            name: '{{trp.First_name}}',
            email: '{{trp.Email}}',
            contact: '{{trp.Phone_number}}'
          },
          notes: {
            address: 'Razorpay Corporate Office'
          },
          theme: {
            color: '#3399cc'
          }
        }
        var rzp1 = new Razorpay(options)
        rzp1.on('payment.failed', function (response) {
          alert(response.error.code)
          alert(response.error.description)
          alert(response.error.source)
          alert(response.error.step)
          alert(response.error.reason)
          alert(response.error.metadata.order_id)
          alert(response.error.metadata.payment_id)
        })
        document.getElementById('rzp-button1').onclick = function (e) {
          rzp1.open()
          e.preventDefault()
        }
      </script>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL" crossorigin="anonymous"></script>
  </body>
</html>
